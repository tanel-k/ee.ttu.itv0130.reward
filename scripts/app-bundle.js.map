{"version":3,"sources":["app.js","environment.js","main.js","entities/shop-item.js","events/events.js","resources/index.js","components/cart/cart.js","components/shop-item/shop-item.js","containers/shop-page/shop-page.js","components/cart/cart.scss","components/shop-item/shop-item.scss","containers/shop-page/shop-page.scss"],"names":["App","configureRouter","config","router","title","map","route","name","moduleId","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","ShopItem","code","imgPath","price","priceCurrencySymbol","stockCount","Object","assign","toFixed","AddToCartSuccessEvent","item","AddToCartFailureEvent","Cart","Element","element","ea","initializeData","attached","initializeDOMHooks","wireEvents","isBuying","isProcessing","cartItemSet","Set","countMap","priceMap","audioBank","cartClank","Audio","cartSemiClank","cartOpen","cartClose","ding","$element","$","$cartIcon","querySelector","shoppingCartToggle","$shoppingCartToggle","$priceLabel","subscribe","registerItem","event","animatePriceLabel","cloneNode","play","effect","times","removeClass","setTimeout","addClass","add","resetCart","clear","toPriceString","buy","$thankYouNote","find","cartClicked","getAttribute","size","isEmpty","total","values","reduce","prev","curr","activate","shopItem","cartViewModel","addToCartButton","$addToCartButton","itemIcon","$itemIcon","currentViewModel","reduceStock","on","isOutOfStock","animateDropToCart","publish","$itemIconClone","clone","offset","top","left","css","appendTo","animate","detach","ShopPage","shopItems"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {}\n\n  configureRouter(config, router) {\n    this.router = router;\n    config.title = 'Reward store';\n    config.map([\n      {\n        route: '',\n        name: 'shop-page',\n        moduleId: 'containers/shop-page/shop-page'\n      }\n    ]);\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export default class ShopItem {\r\n  constructor(code, name, imgPath, price, priceCurrencySymbol, stockCount) {\r\n    Object.assign(this, {\r\n      code,\r\n      name,\r\n      imgPath,\r\n      price,\r\n      priceCurrencySymbol,\r\n      stockCount\r\n    });\r\n  }\r\n\r\n  get priceString() {\r\n    return `${this.priceCurrencySymbol}${this.price.toFixed(2)}`;\r\n  }\r\n}\r\n","export class AddToCartSuccessEvent {\r\n  constructor(item) {\r\n    this.item = item;\r\n  }\r\n}\r\n\r\nexport class AddToCartFailureEvent {}\r\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import { inject } from 'aurelia-framework';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n\r\nimport 'jquery';\r\nimport 'jquery-ui-dist';\r\n\r\nimport { AddToCartSuccessEvent, AddToCartFailureEvent } from '../../events/events';\r\n\r\n@inject(Element, EventAggregator)\r\nexport default class Cart {\r\n  constructor(element, ea) {\r\n    this.element = element;\r\n    this.ea = ea;\r\n\r\n    this.initializeData();\r\n  }\r\n\r\n  attached() {\r\n    this.initializeDOMHooks();\r\n    this.wireEvents();\r\n  }\r\n\r\n  initializeData() {\r\n    this.isBuying = false;\r\n    this.isProcessing = false;\r\n    this.cartItemSet = new Set();\r\n    this.countMap = {};\r\n    this.priceMap = {};\r\n    this.audioBank = {\r\n      cartClank: new Audio('../../media/audio/shopping_cart_clank.mp3'),\r\n      cartSemiClank: new Audio('../../media/audio/shopping_cart_cut_short.mp3'),\r\n      cartOpen: new Audio('../../media/audio/shopping_cart_open.mp3'),\r\n      cartClose: new Audio('../../media/audio/shopping_cart_close.mp3'),\r\n      ding: new Audio('../../media/audio/cash_register_ding.mp3')\r\n    };\r\n  }\r\n\r\n  initializeDOMHooks() {\r\n    this.$element = $(this.element);\r\n    this.$cartIcon = $(this.element.querySelector('i.shopping-cart-icon'));\r\n    this.shoppingCartToggle = this.element.querySelector('.shopping-cart-toggle');\r\n    this.$shoppingCartToggle = $(this.shoppingCartToggle);\r\n    this.$priceLabel = $(this.element.querySelector('#price-label'));\r\n  }\r\n\r\n  wireEvents() {\r\n    this.ea.subscribe(AddToCartSuccessEvent, event => {\r\n      this.registerItem(event.item);\r\n      this.animatePriceLabel();\r\n      this.audioBank.cartClank.cloneNode().play();\r\n      this.$cartIcon.effect('shake', { times: 2 }, 200);\r\n    });\r\n\r\n    this.ea.subscribe(AddToCartFailureEvent, event => {\r\n      this.audioBank.cartSemiClank.cloneNode().play();\r\n    });\r\n  }\r\n\r\n  get isEmpty() {\r\n    return this.cartItemSet.size === 0;\r\n  }\r\n\r\n  get totalPriceString() {\r\n    if (this.isEmpty) {\r\n      return '$0.00';\r\n    }\r\n    const total = Object.values(this.priceMap).reduce((prev, curr) => (prev + curr), 0.0);\r\n    return `$${total.toFixed(2)}`;\r\n  }\r\n\r\n  animatePriceLabel() {\r\n    this.$priceLabel.removeClass('animated flipInX');\r\n    setTimeout(() => this.$priceLabel.addClass('animated flipInX'), 0);\r\n  }\r\n\r\n  registerItem(item) {\r\n    this.cartItemSet.add(item);\r\n    if (typeof this.countMap[item.code] !== 'number') {\r\n      this.countMap[item.code] = 0;\r\n    }\r\n    this.countMap[item.code]++;\r\n\r\n    if (typeof this.priceMap[item.code] !== 'number') {\r\n      this.priceMap[item.code] = 0.0;\r\n    }\r\n    this.priceMap[item.code] += item.price;\r\n  }\r\n\r\n  resetCart() {\r\n    this.cartItemSet.clear();\r\n    this.countMap = {};\r\n    this.priceMap = {};\r\n  }\r\n\r\n  toPriceString(price) {\r\n    return `$${price.toFixed(2)}`;\r\n  }\r\n\r\n  buy() {\r\n    this.audioBank.ding.cloneNode().play();\r\n    this.isBuying = true;\r\n    this.isProcessing = true;\r\n    this.resetCart();\r\n    setTimeout(() => {\r\n      this.isProcessing = false;\r\n      setTimeout(() => {\r\n        const $thankYouNote = this.$element.find('#thank-you-note');\r\n        $thankYouNote.removeClass('animated fadeOut');\r\n        $thankYouNote.addClass('animated fadeIn');\r\n      }, 0);\r\n    }, 900);\r\n    setTimeout(() => {\r\n      const $thankYouNote = this.$element.find('#thank-you-note');\r\n      $thankYouNote.removeClass('animated fadeIn');\r\n      $thankYouNote.addClass('animated fadeOut');\r\n      setTimeout(() => this.isBuying = false, 500);\r\n    }, 1500);\r\n  }\r\n\r\n  cartClicked() {\r\n    if (this.shoppingCartToggle.getAttribute('aria-expanded') === 'true') {\r\n      this.audioBank.cartOpen.cloneNode().play();\r\n    } else {\r\n      this.audioBank.cartClose.cloneNode().play();\r\n    }\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n\r\nimport 'jquery';\r\nimport 'jquery-ui-dist';\r\n\r\nimport { AddToCartSuccessEvent, AddToCartFailureEvent } from '../../events/events';\r\n\r\n@inject(Element, EventAggregator)\r\nexport default class ShopItem {\r\n  constructor(element, ea) {\r\n    this.element = element;\r\n    this.ea = ea;\r\n  }\r\n\r\n  activate({ shopItem, cartViewModel }) {\r\n    this.shopItem = shopItem;\r\n    this.cartViewModel = cartViewModel;\r\n  }\r\n\r\n  attached() {\r\n    this.initializeDOMHooks();\r\n    this.wireEvents();\r\n  }\r\n\r\n  initializeDOMHooks() {\r\n    this.addToCartButton = this.element.querySelector('button.add-to-cart');\r\n    this.$addToCartButton = $(this.addToCartButton);\r\n    this.itemIcon = this.element.querySelector('img.item-image');\r\n    this.$itemIcon = $(this.itemIcon);\r\n    this.$cartIcon = this.cartViewModel.currentViewModel.$cartIcon;\r\n  }\r\n\r\n  get isOutOfStock() {\r\n    return this.shopItem.stockCount <= 0;\r\n  }\r\n\r\n  reduceStock() {\r\n    if (this.shopItem.stockCount > 0) {\r\n      this.shopItem.stockCount--;\r\n    }\r\n  }\r\n\r\n  wireEvents() {\r\n    this.$addToCartButton.on('click', (event) => {\r\n      if (!this.isOutOfStock) {\r\n        this.reduceStock();\r\n        this.animateDropToCart();\r\n      } else {\r\n        this.ea.publish(new AddToCartFailureEvent());\r\n      }\r\n    });\r\n  }\r\n\r\n  animateDropToCart() {\r\n    const $cartIcon = this.$cartIcon;\r\n    const $itemIcon = this.$itemIcon;\r\n    const $itemIconClone = $itemIcon.clone();\r\n    $itemIconClone\r\n      .offset({\r\n        top: $itemIcon.offset().top,\r\n        left: $itemIcon.offset().left\r\n      })\r\n      .css({\r\n        'opacity': '0.5',\r\n        'position': 'absolute',\r\n        'height': '150px',\r\n        'width': '150px',\r\n        'z-index': '100'\r\n      })\r\n      .appendTo($('body'))\r\n      .animate({\r\n        'top': $cartIcon.offset().top + 10,\r\n        'left': $cartIcon.offset().left + 10,\r\n        'width': 75,\r\n        'height': 75\r\n      }, 750, 'easeInOutExpo');\r\n\r\n    setTimeout(() => {\r\n      this.ea.publish(new AddToCartSuccessEvent(this.shopItem));\r\n    }, 1250);\r\n\r\n    $itemIconClone.animate({ 'width': 0, 'height': 0 }, () => {\r\n      $itemIconClone.detach();\r\n    });\r\n  }\r\n}\r\n","import { default as ShopItem } from '../../entities/shop-item';\r\n\r\nexport class ShopPage {\r\n  constructor() {\r\n    this.shopItems = [\r\n      new ShopItem('sb', 'Saw blade', '../../media/img/saw-blade.jpg', 2.00, '$', 12),\r\n      new ShopItem('hm', 'Hammer', '../../media/img/hammer.jpg', 15.00, '$', 25),\r\n      new ShopItem('pl', 'Pliers', '../../media/img/pliers.jpg', 23.40, '$', 24),\r\n      new ShopItem('dr', 'Drill', '../../media/img/drill.jpg', 100.00, '$', 5),\r\n      new ShopItem('sk', 'Screwdriver kit', '../../media/img/screw-drivers.jpg', 35.00, '$', 10),\r\n      new ShopItem('wr', 'Wrench', '../../media/img/wrench.jpg', 17.00, '$', 24)\r\n    ];\r\n  }\r\n}\r\n",".shopping-cart-container {\r\n  float: right;\r\n  & + .dropdown-menu {\r\n    width: 100% !important;\r\n  }\r\n  width: 225px;\r\n}\r\n\r\n.cart-phase-span {\r\n  display: inline-block;\r\n}\r\n\r\n.navbar-collapse.collapse {\r\n  display: block!important;\r\n}\r\n\r\n.navbar-nav > li, .navbar-nav {\r\n  float: left !important;\r\n}\r\n\r\n.navbar-nav.navbar-right:last-child {\r\n  margin-right: -15px !important;\r\n}\r\n\r\n.navbar-right {\r\n  float: right!important;\r\n}\r\n\r\n.dropdown-menu > li > .dropdown-item {\r\n  display: block;\r\n  padding: 3px 20px;\r\n  clear: both;\r\n  font-weight: normal;\r\n  line-height: 1.846;\r\n  color: #666666;\r\n  white-space: nowrap;\r\n}\r\n\r\n.btn-buy {\r\n  color: white !important;\r\n}\r\n\r\n#thank-you-note {\r\n  color: green;\r\n}",".item {\r\n  background-color: #fff;\r\n  float: left;\r\n  padding: 5px;\r\n  margin: 5px;\r\n\r\n  img {\r\n      display: block;\r\n      margin: auto;\r\n      height: 200px;\r\n      width: 200px;\r\n  }\r\n\r\n  p {\r\n    margin: 0;\r\n  }\r\n\r\n  .stock-count-out {\r\n    color: red;\r\n  }\r\n\r\n  .stock-count-has {\r\n    color: green;\r\n  }\r\n}\r\n\r\n.item.panel-primary {\r\n  .panel-heading {\r\n    h1,h2,h3,h4,h5,h6 {\r\n      &.primary {\r\n        color: white !important;\r\n      }\r\n\r\n      &.secondary {\r\n        color: #F5F3F0 !important;\r\n      }\r\n    }\r\n  }\r\n}",".wrapper {\r\n  width: 800px;\r\n  margin: 20px auto;\r\n  padding: 20px;\r\n}\r\n\r\n.items {\r\n  display: block;\r\n  margin: 20px 0;\r\n}\r\n\r\nbody {\r\n  padding-top: 30px;\r\n}\r\n\r\n.navbar-fixed-top {\r\n  z-index: auto !important;\r\n\r\n  .shopping-cart-container {\r\n    margin-top: 9px !important;\r\n  }\r\n}\r\n"],"sourceRoot":".."}